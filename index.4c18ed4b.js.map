{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aASA,IAAIC,EAAO,EACPC,EAAe,GACfC,GAAY,EACZC,GAAiB,EACjBC,GAAyB,EACzBC,EAAc,EACdC,EAAiB,EAErB,MAAMC,EAAOC,SAASC,eAAe,eAC/BC,EAAUF,SAASG,cAAc,YACjCC,GAAW,EAAAC,EAAAC,sBAkCjBC,eAAeC,EAAqBC,GAClC,IACEf,GAAY,EAEZ,MAAMgB,QAAa,EAAApB,EAAAqB,aAAYF,EAAOjB,EAjD1B,IAkDNoB,EAASF,EAAKG,KAEpB,GAAsB,IAAlBD,EAAOE,OAMT,OALAnB,GAAiB,OAEZC,IACH,EAAAS,EAAAU,yBAAwB,gEAK5BjB,EAAiBkB,KAAKC,KAAKP,EAAKQ,UA7DpB,IA+DPtB,KACH,EAAAS,EAAAc,yBAAwB,oBAAoBT,EAAKQ,qBACjDtB,GAAyB,GAa/B,SAAsBgB,GACpB,MAAMQ,EAAaR,EAAOS,KAAIC,GAMhC,SAAyBA,GACvB,MAAO,kDAEQA,EAAMC,uDACHD,EAAME,sBAAsBF,EAAMG,yHAI5BH,EAAMI,+EAGNJ,EAAMK,kFAGHL,EAAMM,sFAGLN,EAAMO,uD,CAvBKC,CAAgBR,KACvDpB,EAAQ6B,mBAAmB,YAAaX,EAAWY,KAAK,KAExD5B,EAAS6B,S,CAdPC,CAAatB,GACbpB,IACAK,G,CACA,MAAOsC,IACP,EAAA9B,EAAAU,yBAAwB,8B,CACzB,QACCrB,GAAY,C,EA7DhBK,EAAKqC,iBAAiB,UAYtB7B,eAAgC8B,GAC9BA,EAAMC,iBACN,MAAMC,EAAW,IAAIC,SAASzC,GAG9B,GAFAN,EAAe8C,EAASE,IAAI,eAEA,KAAxBhD,EAAaiD,OAEf,YADA,EAAArC,EAAAsC,sBAAqB,gCAIvBzC,EAAQ0C,UAAY,GACpBpD,EAAO,EACPG,GAAiB,EACjBC,GAAyB,EACzBC,EAAc,EACdC,EAAiB,QAEXU,EAAqBf,E,IA3B7BoD,OAAOT,iBAAiB,UAAU,KAChC,GAAI1C,GAAaC,GAAkBE,GAAeC,EAAgB,OAElE,MAAMgD,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBhD,SAASiD,gBAEvDH,EAAYC,GAAgBC,EAAe,KAyFjDzC,iBACE,GAAIb,GAAaC,GAAkBE,GAAeC,EAAgB,aAE5DU,EAAqBf,E,CA3FzByD,EAAgB","sources":["src/index.js"],"sourcesContent":["import { fetchImages } from './api.js';\nimport {\n  initializeLightbox,\n  showInfoNotification,\n  showSuccessNotification,\n  showFailureNotification,\n} from './ui.js';\n\nconst perPage = 40;\nlet page = 1;\nlet currentQuery = '';\nlet isLoading = false;\nlet isEndOfResults = false;\nlet hasContentNotification = false;\nlet currentPage = 0;\nlet totalPageCount = 0;\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst lightbox = initializeLightbox();\n\nform.addEventListener('submit', handleFormSubmit);\n\nwindow.addEventListener('scroll', () => {\n  if (isLoading || isEndOfResults || currentPage >= totalPageCount) return;\n\n  const { scrollTop, clientHeight, scrollHeight } = document.documentElement;\n\n  if (scrollTop + clientHeight >= scrollHeight - 1000) {\n    loadMoreImages();\n  }\n});\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(form);\n  currentQuery = formData.get('searchQuery');\n\n  if (currentQuery.trim() === '') {\n    showInfoNotification('Please enter a search query.');\n    return;\n  }\n\n  gallery.innerHTML = '';\n  page = 1;\n  isEndOfResults = false;\n  hasContentNotification = false;\n  currentPage = 0;\n  totalPageCount = 0;\n\n  await fetchAndRenderImages(currentQuery);\n}\n\nasync function fetchAndRenderImages(query) {\n  try {\n    isLoading = true;\n\n    const data = await fetchImages(query, page, perPage);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      isEndOfResults = true;\n\n      if (!hasContentNotification) {\n        showFailureNotification('Sorry, there are no more images matching your search query.');\n      }\n      return;\n    }\n\n    totalPageCount = Math.ceil(data.totalHits / perPage);\n\n    if (!hasContentNotification) {\n      showSuccessNotification(`Hooray! We found ${data.totalHits} images.`);\n      hasContentNotification = true;\n    }\n\n    renderImages(images);\n    page++;\n    currentPage++;\n  } catch (error) {\n    showFailureNotification('Oops! Something went wrong.');\n  } finally {\n    isLoading = false;\n  }\n}\n\nfunction renderImages(images) {\n  const imageCards = images.map(image => createImageCard(image));\n  gallery.insertAdjacentHTML('beforeend', imageCards.join(''));\n\n  lightbox.refresh();\n}\n\nfunction createImageCard(image) {\n  return `\n    <div class=\"photo-card\">\n      <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes:</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views:</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments:</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads:</b> ${image.downloads}\n        </p>\n      </div>\n    </div>\n  `;\n}\n\nasync function loadMoreImages() {\n  if (isLoading || isEndOfResults || currentPage >= totalPageCount) return;\n\n  await fetchAndRenderImages(currentQuery);\n}"],"names":["$2POL7","parcelRequire","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$currentQuery","$1f0dc3b9307be026$var$isLoading","$1f0dc3b9307be026$var$isEndOfResults","$1f0dc3b9307be026$var$hasContentNotification","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$totalPageCount","$1f0dc3b9307be026$var$form","document","getElementById","$1f0dc3b9307be026$var$gallery","querySelector","$1f0dc3b9307be026$var$lightbox","$kpjQp","initializeLightbox","async","$1f0dc3b9307be026$var$fetchAndRenderImages","query","data","fetchImages","images","hits","length","showFailureNotification","Math","ceil","totalHits","showSuccessNotification","imageCards","map","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$var$createImageCard","insertAdjacentHTML","join","refresh","$1f0dc3b9307be026$var$renderImages","error","addEventListener","event","preventDefault","formData","FormData","get","trim","showInfoNotification","innerHTML","window","scrollTop","clientHeight","scrollHeight","documentElement","$1f0dc3b9307be026$var$loadMoreImages"],"version":3,"file":"index.4c18ed4b.js.map"}