{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCASIC,EAAO,EACPC,EAAe,GACfC,GAAY,EACZC,GAAiB,EACjBC,GAAyB,EACzBC,EAAc,EACdC,EAAiB,EAEfC,EAAOC,SAASC,eAAe,eAC/BC,EAAUF,SAASG,cAAc,YACjCC,GAAW,EAAAC,EAAAC,sB,SAcFC,I,OAAAA,EAAfC,EAAAlB,EAAA,CAAAkB,EAAAC,GAAAC,MAAA,SAAAC,EAAgCC,G,IAExBC,E,qEADND,EAAME,iBACAD,EAAW,IAAIE,SAAShB,GAGF,MAF5BN,EAAeoB,EAASG,IAAI,gBAEXC,OAAa,C,sBAC5B,EAAAZ,EAAAa,sBAAqB,gC,iCAIvBhB,EAAQiB,UAAY,GACpB3B,EAAO,EACPG,GAAiB,EACjBC,GAAyB,EACzBC,EAAc,EACdC,EAAiB,E,UAEXsB,EAAqB3B,G,6CAjBE4B,MAAAC,KAAAC,U,UAoBhBH,EAAqBI,G,OAArBC,EAAoBJ,MAAAC,KAAAC,U,UAApBE,I,OAAAA,EAAfjB,EAAAlB,EAAA,CAAAkB,EAAAC,GAAAC,MAAA,SAAAC,EAAoCa,G,IAI1BE,EACAC,E,kFAHNjC,GAAY,E,UAEO,EAAAkC,EAAAC,aAAYL,EAAOhC,EAjD1B,I,UAiDNkC,EAAII,EAAAC,KAGY,KAFhBJ,EAASD,EAAKM,MAETC,OAAY,C,uBACrBtC,GAAiB,EAEZC,IACH,EAAAS,EAAA6B,yBAAwB,+D,2BAK5BpC,EAAiBqC,KAAKC,KAAKV,EAAKW,UA7DpB,IA+DPzC,KACH,EAAAS,EAAAiC,yBAAwB,oBAAmCC,OAAfb,EAAKW,UAAU,aAC3DzC,GAAyB,GAG3B4C,EAAab,GACbnC,IACAK,I,mDAEA,EAAAQ,EAAA6B,yBAAwB,+B,yBAExBxC,GAAY,E,8EA7BmB2B,MAAAC,KAAAC,U,CAiCnC,SAASiB,EAAab,GACpB,IAAMc,EAAad,EAAOe,KAAI,SAAAC,G,OAMhC,SAAyBA,GACvB,MAAO,kDAGWJ,OADHI,EAAMC,cAAc,2CACWL,OAA5BI,EAAME,aAAa,WAIbN,OAJsBI,EAAMG,KAAK,sHAOjCP,OAHAI,EAAMI,MAAM,2EAMTR,OAHHI,EAAMK,MAAM,8EAMRT,OAHDI,EAAMM,SAAS,+EAGEV,OAAhBI,EAAMO,UAAU,+C,CAvBLC,CAAgBR,E,IACvDzC,EAAQkD,mBAAmB,YAAaX,EAAWY,KAAK,KAExDjD,EAASkD,S,UA2BIC,I,OAAAA,EAAf/C,EAAAlB,EAAA,CAAAkB,EAAAC,GAAAC,MAAA,SAAAC,I,uEACMjB,GAAaC,GAAkBE,GAAeC,GAAc,C,gEAE1DsB,EAAqB3B,G,4CAHA4B,MAAAC,KAAAC,U,CAhG7BxB,EAAKyD,iBAAiB,U,SAYU5C,G,OAAjBL,EAAgBc,MAAAC,KAAAC,U,IAV/BkC,OAAOD,iBAAiB,UAAU,WAChC,KAAI9D,GAAaC,GAAkBE,GAAeC,GAAlD,CAEA,IAAkD4D,EAAA1D,SAAS2D,gBAATD,EAA1CE,UAA0CF,EAA/BG,cAA+BH,EAAjBI,aAEc,K,WAyFlCP,EAAclC,MAAAC,KAAAC,U,CAxFzBwC,EALgE,C","sources":["src/index.js"],"sourcesContent":["import { fetchImages } from './api.js';\nimport {\n  initializeLightbox,\n  showInfoNotification,\n  showSuccessNotification,\n  showFailureNotification,\n} from './ui.js';\n\nconst perPage = 40;\nlet page = 1;\nlet currentQuery = '';\nlet isLoading = false;\nlet isEndOfResults = false;\nlet hasContentNotification = false;\nlet currentPage = 0;\nlet totalPageCount = 0;\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst lightbox = initializeLightbox();\n\nform.addEventListener('submit', handleFormSubmit);\n\nwindow.addEventListener('scroll', () => {\n  if (isLoading || isEndOfResults || currentPage >= totalPageCount) return;\n\n  const { scrollTop, clientHeight, scrollHeight } = document.documentElement;\n\n  if (scrollTop + clientHeight >= scrollHeight - 1000) {\n    loadMoreImages();\n  }\n});\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(form);\n  currentQuery = formData.get('searchQuery');\n\n  if (currentQuery.trim() === '') {\n    showInfoNotification('Please enter a search query.');\n    return;\n  }\n\n  gallery.innerHTML = '';\n  page = 1;\n  isEndOfResults = false;\n  hasContentNotification = false;\n  currentPage = 0;\n  totalPageCount = 0;\n\n  await fetchAndRenderImages(currentQuery);\n}\n\nasync function fetchAndRenderImages(query) {\n  try {\n    isLoading = true;\n\n    const data = await fetchImages(query, page, perPage);\n    const images = data.hits;\n\n    if (images.length === 0) {\n      isEndOfResults = true;\n\n      if (!hasContentNotification) {\n        showFailureNotification('Sorry, there are no more images matching your search query.');\n      }\n      return;\n    }\n\n    totalPageCount = Math.ceil(data.totalHits / perPage);\n\n    if (!hasContentNotification) {\n      showSuccessNotification(`Hooray! We found ${data.totalHits} images.`);\n      hasContentNotification = true;\n    }\n\n    renderImages(images);\n    page++;\n    currentPage++;\n  } catch (error) {\n    showFailureNotification('Oops! Something went wrong.');\n  } finally {\n    isLoading = false;\n  }\n}\n\nfunction renderImages(images) {\n  const imageCards = images.map(image => createImageCard(image));\n  gallery.insertAdjacentHTML('beforeend', imageCards.join(''));\n\n  lightbox.refresh();\n}\n\nfunction createImageCard(image) {\n  return `\n    <div class=\"photo-card\">\n      <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes:</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views:</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments:</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads:</b> ${image.downloads}\n        </p>\n      </div>\n    </div>\n  `;\n}\n\nasync function loadMoreImages() {\n  if (isLoading || isEndOfResults || currentPage >= totalPageCount) return;\n\n  await fetchAndRenderImages(currentQuery);\n}"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$currentQuery","$b8f9b7833fa37166$var$isLoading","$b8f9b7833fa37166$var$isEndOfResults","$b8f9b7833fa37166$var$hasContentNotification","$b8f9b7833fa37166$var$currentPage","$b8f9b7833fa37166$var$totalPageCount","$b8f9b7833fa37166$var$form","document","getElementById","$b8f9b7833fa37166$var$gallery","querySelector","$b8f9b7833fa37166$var$lightbox","$3hPHW","initializeLightbox","$b8f9b7833fa37166$var$_handleFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","event","formData","preventDefault","FormData","get","trim","showInfoNotification","innerHTML","$b8f9b7833fa37166$var$fetchAndRenderImages","apply","this","arguments","query","$b8f9b7833fa37166$var$_fetchAndRenderImages","data","images","$446fK","fetchImages","_ctx","sent","hits","length","showFailureNotification","Math","ceil","totalHits","showSuccessNotification","concat","$b8f9b7833fa37166$var$renderImages","imageCards","map","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","$b8f9b7833fa37166$var$createImageCard","insertAdjacentHTML","join","refresh","$b8f9b7833fa37166$var$_loadMoreImages","addEventListener","window","_documentElement","documentElement","scrollTop","clientHeight","scrollHeight","$b8f9b7833fa37166$var$loadMoreImages"],"version":3,"file":"index.183c9b9f.js.map"}